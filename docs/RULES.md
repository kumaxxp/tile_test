# AGSP Constitution (Rules of Engagement)

**AI General Staff Protocol v2.0: Fundamental Laws**

本プロジェクトは、AGSPに基づき運用される。全ての参加者は以下の法を遵守せよ。

---

## 第1条：ドキュメント絶対主義 (Document Sovereignty)

1. **Single Source of Truth**: 真実は常に `docs/SPECIFICATION.md` にある。
2. **Spec-Driven**: 仕様書が存在しない状態でのコーディングを禁ずる。
3. **Reverse Sync**: 実装時のエラーや矛盾は、コードの修正ではなく、仕様書の修正によって解決せよ。

> "Don't fix the code. Update the Spec."

---

## 第2条：指揮系統 (Chain of Command)

### 2.1 大本営参謀本部 (Imperial General Headquarters)

| 役職 | 担当 | 権限 |
|------|------|------|
| 幕僚長 | User | 発議・最終裁可・目視確認要求権 |
| 参謀総長 | Gemini | 戦略立案・方針決定・技術本部諮問 |

### 2.2 技術本部【諮問機関】

| 役職 | 担当 | 権限 |
|------|------|------|
| 技術本部 | NotebookLM | 調査・分析（諮問への回答のみ） |

### 2.3 方面軍

| 役職 | 担当 | 権限 |
|------|------|------|
| 方面軍参謀長 | Cline | 仕様書作成・更新（方針遵守義務） |

### 2.4 師団

| 役職 | 担当 | 権限 |
|------|------|------|
| 師団長 | Claude Code | **作戦開始・中止の最終判断権** |

### 2.5 情報参謀

| 役職 | 担当 | 権限 |
|------|------|------|
| 情報参謀 | Claude Desktop | 査察・報告（読み取り専用） |

---

## 第3条：師団長の作戦判断権 (Division Commander's Authority)

### 3.1 作戦開始の最終判断権

師団長（Claude Code）は、仕様書を査閲した上で、以下を判断する権限を有する：

1. 仕様書の実現可能性の評価
2. 技術的制約との整合性確認
3. 作戦開始の可否決定

### 3.2 作戦中止の最終判断権

師団長は、以下の状況において作戦を中止し、方面軍参謀長へ差し戻す権限を有する：

1. **仕様の矛盾**: 仕様書内に論理的矛盾を発見した場合
2. **技術的障壁**: 現行技術では実現不可能と判断した場合
3. **リソース不足**: 必要な依存関係・ツールが不足している場合
4. **安全性懸念**: 実装がセキュリティリスクを生む場合

### 3.3 中止時の報告義務

作戦を中止した場合、師団長は以下を報告せよ：

```markdown
## 作戦中止報告
- **中止理由**: [矛盾/障壁/不足/懸念]
- **該当箇所**: [仕様書のセクション番号]
- **詳細説明**: [具体的な問題点]
- **提案**: [解決策の提案（あれば）]
```

---

## 第4条：方面軍参謀長の方針遵守義務 (Staff Compliance)

### 4.1 禁止事項

方面軍参謀長（Cline）は、以下の行為を禁ずる：

1. ❌ 大本営の方針を逸脱する仕様書の作成
2. ❌ 承認されていない機能の仕様への追加
3. ❌ ソースコードの直接修正
4. ❌ 戦略的意図を独断で解釈・補完すること

### 4.2 エスカレーション義務

以下の状況では、独断で進めず大本営へ確認を求めよ：

1. 方針に曖昧な点がある場合
2. 複数の解釈が可能な指示を受けた場合
3. 師団長から実現不可能との報告を受けた場合

---

## 第5条：成果物の目視確認規定 (Visual Inspection Protocol)

### 5.1 幕僚長の目視確認要求権

幕僚長（User）は、**任意のタイミング**で師団長（Claude Code）に対し、以下を要求できる：

1. **実行デモンストレーション**: 成果物の動作確認
2. **実行ログの提示**: コマンド実行結果・テスト結果
3. **スクリーンショット**: 画面キャプチャによる目視確認

### 5.2 師団長の対応義務

師団長は、幕僚長からの目視確認要求に対し、**速やかに対応する義務**を負う。

対応形式の例：

```markdown
## 目視確認報告
- **要求内容**: [実行デモ/ログ/SS]
- **実行コマンド**: `python main.py --test`
- **結果**: [成功/失敗]
- **添付**: [ログ内容またはスクリーンショット]
```

### 5.3 差し戻し権

目視確認の結果、不備が発見された場合、幕僚長は作戦の差し戻しを命ずることができる。

---

## 第6条：監査と報告 (Audit & Reporting)

### 6.1 情報参謀の任務

情報参謀（Claude Desktop）は、以下の任務を遂行する：

1. 戦域（ソースコード・テスト状況）の査察
2. 仕様書と実装の整合性監査
3. 戦況報告書（SITREP）の作成・提出

### 6.2 報告書の保存

報告書は `docs/` 配下に以下の命名規則で保存する：

```
docs/SITREP_YYYY-MM-DD.md
docs/SITREP_v2_YYYY-MM-DD.md（改訂版）
```

### 6.3 乖離発見時の即時報告

仕様書と実装の乖離を発見した場合、情報参謀は速やかに参謀総長へ報告する義務を負う。

---

## 第7条：逆流同期 (Reverse Sync)

1. 実装時のエラーや矛盾は、コードの修正ではなく、**仕様書の修正**によって解決せよ。
2. 師団長がエラーを検出した場合、作戦を中止し、方面軍参謀長へ仕様書の修正を要求する。
3. 修正された仕様書に基づき、作戦を再開する。

---

## 第8条：Everything-Claude-Code (ECC) 準拠

1. 師団長（Claude Code）は、ECCプロトコルに従いTDDによる実装を行う。
2. 直接コーディングではなく、`/tdd` コマンド等のAgent機能を使用すること。
3. 実装完了時は、`/code-review` または `/security-audit` を通過させよ。
4. プロジェクトの命名規則等は `.claude/rules/` 内の定義に従え。

---

## 附則

### 施行日
本規律は 2025年1月30日 より施行する。

### 改訂履歴
| 版 | 日付 | 改訂内容 |
|----|------|----------|
| 1.0 | 2025-01-30 | 初版制定（電撃設営） |

---

*AGSP v2.0 Constitution - AI General Staff Protocol*
